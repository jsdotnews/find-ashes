<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daily Lenten Companion | Find a Church Near You</title>
<meta name="description" content="Your daily Lenten companion. Liturgical calendar, daily readings, saints, and find a Catholic church near you.">
<meta property="og:title" content="Daily Lenten Companion">
<meta property="og:description" content="Liturgical calendar, daily readings, and find a Catholic church near you for Lent 2026.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Figtree:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    /* Default: Violet / Lent */
    --bg-deep: #2E1A47;
    --bg-mid: #4A2D6B;
    --bg-accent: #6B3FA0;
    --bg-soft: #8B6AAF;
    --bg-glow: rgba(139, 106, 175, 0.25);
    --text-on-dark: #E8E0EC;
    --text-muted: #B8A8C4;
    --pill-bg: rgba(255,255,255,0.08);
    --cream: #FAF7F2;
    --cream-soft: #F0EBE3;
    --warm-white: #FFFDF9;
    --text-primary: #1C1618;
  }

/* Rose - Laetare Sunday */
body.rose {
‚Äìbg-deep: #4A2038;
‚Äìbg-mid: #6B3050;
‚Äìbg-accent: #C27088;
‚Äìbg-soft: #D4909A;
‚Äìbg-glow: rgba(210, 144, 154, 0.25);
‚Äìtext-on-dark: #F2E0E4;
‚Äìtext-muted: #D4B0B8;
}

/* Red - Palm Sunday, Good Friday */
body.red {
‚Äìbg-deep: #3A0E0E;
‚Äìbg-mid: #5C1A1A;
‚Äìbg-accent: #A03030;
‚Äìbg-soft: #C05050;
‚Äìbg-glow: rgba(180, 60, 60, 0.25);
‚Äìtext-on-dark: #F0DADA;
‚Äìtext-muted: #D0A8A8;
}

/* White/Gold - Easter, Holy Thursday, Holy Saturday */
body.white {
‚Äìbg-deep: #1A1A10;
‚Äìbg-mid: #3A3520;
‚Äìbg-accent: #C49B4A;
‚Äìbg-soft: #D4B86A;
‚Äìbg-glow: rgba(196, 155, 74, 0.25);
‚Äìtext-on-dark: #F5F0E0;
‚Äìtext-muted: #C8C0A8;
}

- { margin: 0; padding: 0; box-sizing: border-box; }

body {
font-family: ‚ÄòFigtree‚Äô, -apple-system, sans-serif;
background: var(‚Äìbg-deep);
color: var(‚Äìtext-on-dark);
min-height: 100vh;
overflow-x: hidden;
-webkit-font-smoothing: antialiased;
transition: background 0.6s ease;
}

.hero {
position: relative;
min-height: 48vh;
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
padding: 48px 24px 36px;
overflow: hidden;
background: linear-gradient(170deg, color-mix(in srgb, var(‚Äìbg-deep) 80%, black) 0%, var(‚Äìbg-deep) 30%, var(‚Äìbg-mid) 70%, var(‚Äìbg-accent) 100%);
transition: background 0.6s ease;
}

.hero::before {
content: ‚Äò‚Äô;
position: absolute;
inset: 0;
opacity: 0.06;
background-image: url(‚Äúdata:image/svg+xml,%3Csvg viewBox=‚Äò0 0 256 256‚Äô xmlns=‚Äòhttp://www.w3.org/2000/svg‚Äô%3E%3Cfilter id=‚Äònoise‚Äô%3E%3CfeTurbulence type=‚ÄòfractalNoise‚Äô baseFrequency=‚Äò0.9‚Äô numOctaves=‚Äò4‚Äô stitchTiles=‚Äòstitch‚Äô/%3E%3C/filter%3E%3Crect width=‚Äò100%25‚Äô height=‚Äò100%25‚Äô filter=‚Äòurl(%23noise)‚Äô/%3E%3C/svg%3E‚Äù);
background-size: 128px;
pointer-events: none;
}

.hero::after {
content: ‚Äò‚Äô;
position: absolute;
top: 30%;
left: 50%;
transform: translate(-50%, -50%);
width: 300px;
height: 300px;
background: radial-gradient(circle, var(‚Äìbg-glow) 0%, transparent 70%);
pointer-events: none;
}

/* Liturgical color indicator dot */
.color-dot {
width: 12px;
height: 12px;
border-radius: 50%;
margin-bottom: 16px;
opacity: 0;
animation: breatheIn 0.8s ease-out 0.2s forwards;
}
.color-dot.violet { background: #8B6AAF; box-shadow: 0 0 12px rgba(139,106,175,0.5); }
.color-dot.rose { background: #D4909A; box-shadow: 0 0 12px rgba(212,144,154,0.5); }
.color-dot.red { background: #C05050; box-shadow: 0 0 12px rgba(192,80,80,0.5); }
.color-dot.white { background: #D4B86A; box-shadow: 0 0 12px rgba(212,184,106,0.5); }

.season-label {
font-size: 0.72rem;
font-weight: 700;
letter-spacing: 0.12em;
text-transform: uppercase;
color: var(‚Äìbg-soft);
margin-bottom: 8px;
opacity: 0;
animation: breatheIn 0.8s ease-out 0.3s forwards;
}

.hero-title {
font-family: ‚ÄòInstrument Serif‚Äô, Georgia, serif;
font-size: clamp(2rem, 7vw, 3.2rem);
font-weight: 400;
text-align: center;
line-height: 1.1;
letter-spacing: -0.02em;
color: #FFFFFF;
opacity: 0;
animation: breatheIn 0.8s ease-out 0.4s forwards;
}

.hero-date {
font-size: 0.95rem;
color: var(‚Äìtext-muted);
margin-top: 8px;
opacity: 0;
animation: breatheIn 0.8s ease-out 0.55s forwards;
}

.liturgical-color-name {
display: inline-flex;
align-items: center;
gap: 6px;
margin-top: 14px;
padding: 6px 14px;
background: var(‚Äìpill-bg);
backdrop-filter: blur(8px);
-webkit-backdrop-filter: blur(8px);
border: 1px solid rgba(255,255,255,0.1);
border-radius: 100px;
font-size: 0.75rem;
font-weight: 600;
letter-spacing: 0.05em;
text-transform: uppercase;
color: var(‚Äìtext-muted);
opacity: 0;
animation: breatheIn 0.8s ease-out 0.7s forwards;
}

.liturgical-color-name .mini-dot {
width: 6px;
height: 6px;
border-radius: 50%;
}

/* Saint / Feast */
.saint-section {
max-width: 520px;
margin: 0 auto;
padding: 20px 20px 0;
text-align: center;
opacity: 0;
animation: slideUp 0.8s ease-out 0.8s forwards;
}

.saint-name {
font-family: ‚ÄòInstrument Serif‚Äô, Georgia, serif;
font-size: 1.1rem;
font-style: italic;
color: var(‚Äìtext-on-dark);
}

.saint-type {
font-size: 0.78rem;
color: var(‚Äìtext-muted);
margin-top: 2px;
}

/* Lenten note (fasting, abstinence, etc) */
.lenten-note {
max-width: 520px;
margin: 16px auto 0;
padding: 0 20px;
opacity: 0;
animation: slideUp 0.8s ease-out 0.9s forwards;
}

.lenten-note-inner {
text-align: center;
padding: 12px 18px;
background: rgba(255,255,255,0.06);
border: 1px solid rgba(255,255,255,0.08);
border-radius: 12px;
font-size: 0.85rem;
color: var(‚Äìtext-muted);
line-height: 1.5;
}

.lenten-note-inner strong { color: var(‚Äìtext-on-dark); }

/* Readings */
.readings-section {
max-width: 520px;
margin: 24px auto 0;
padding: 0 20px;
opacity: 0;
animation: slideUp 0.8s ease-out 1s forwards;
}

.readings-card {
background: rgba(255,255,255,0.04);
border: 1px solid rgba(255,255,255,0.07);
border-radius: 16px;
padding: 20px;
}

.readings-title {
font-family: ‚ÄòInstrument Serif‚Äô, Georgia, serif;
font-size: 1.15rem;
color: #fff;
margin-bottom: 14px;
}

.reading-item {
padding: 10px 0;
border-bottom: 1px solid rgba(255,255,255,0.05);
}

.reading-item:last-child { border-bottom: none; }

.reading-label {
font-size: 0.72rem;
font-weight: 700;
letter-spacing: 0.06em;
text-transform: uppercase;
color: var(‚Äìbg-soft);
margin-bottom: 3px;
}

.reading-ref {
font-size: 0.92rem;
color: var(‚Äìtext-on-dark);
}

.readings-link {
display: block;
text-align: center;
margin-top: 14px;
padding: 11px;
background: var(‚Äìbg-accent);
color: #fff;
text-decoration: none;
border-radius: 10px;
font-size: 0.88rem;
font-weight: 600;
transition: opacity 0.2s;
}

.readings-link:hover { opacity: 0.85; }

.readings-loading {
text-align: center;
padding: 20px;
color: var(‚Äìtext-muted);
font-size: 0.88rem;
}

/* Scripture quote */
.scripture {
max-width: 520px;
margin: 24px auto;
padding: 0 20px;
text-align: center;
opacity: 0;
animation: breatheIn 0.8s ease-out 1.1s forwards;
}

.scripture p {
font-family: ‚ÄòInstrument Serif‚Äô, Georgia, serif;
font-style: italic;
font-size: 1.05rem;
color: var(‚Äìtext-muted);
line-height: 1.5;
}

.scripture cite {
display: block;
margin-top: 6px;
font-family: ‚ÄòFigtree‚Äô, sans-serif;
font-style: normal;
font-size: 0.75rem;
font-weight: 600;
letter-spacing: 0.04em;
color: var(‚Äìbg-soft);
}

/* Divider */
.section-divider {
max-width: 520px;
margin: 28px auto;
padding: 0 20px;
opacity: 0;
animation: slideUp 0.8s ease-out 1.2s forwards;
}

.section-divider hr {
border: none;
border-top: 1px solid rgba(255,255,255,0.06);
}

.section-divider-label {
text-align: center;
font-size: 0.72rem;
font-weight: 700;
letter-spacing: 0.1em;
text-transform: uppercase;
color: var(‚Äìtext-muted);
margin-top: 12px;
}

/* Search card */
.search-wrap {
max-width: 520px;
margin: 20px auto 0;
padding: 0 20px;
opacity: 0;
animation: slideUp 0.8s ease-out 1.3s forwards;
}

.search-card {
background: var(‚Äìwarm-white);
border-radius: 20px;
padding: 24px;
box-shadow: 0 4px 24px rgba(0,0,0,0.12);
}

.input-group { position: relative; }

.search-input {
width: 100%;
font-family: ‚ÄòFigtree‚Äô, sans-serif;
font-size: 1.05rem;
padding: 16px 18px;
padding-right: 130px;
background: var(‚Äìcream);
border: 2px solid transparent;
border-radius: 12px;
color: var(‚Äìtext-primary);
outline: none;
transition: border-color 0.25s ease, box-shadow 0.25s ease;
}

.search-input:focus {
border-color: var(‚Äìbg-accent);
box-shadow: 0 0 0 4px var(‚Äìbg-glow);
}

.search-input::placeholder { color: #A89CA0; }

.search-input:-webkit-autofill,
.search-input:-webkit-autofill:hover,
.search-input:-webkit-autofill:focus {
-webkit-box-shadow: 0 0 0px 1000px var(‚Äìcream) inset;
-webkit-text-fill-color: var(‚Äìtext-primary);
font-family: ‚ÄòFigtree‚Äô, sans-serif;
font-size: 1.05rem;
}

.btn-find {
position: absolute;
right: 6px;
top: 50%;
transform: translateY(-50%);
font-family: ‚ÄòFigtree‚Äô, sans-serif;
font-size: 0.88rem;
font-weight: 600;
padding: 11px 20px;
background: var(‚Äìbg-deep);
color: #fff;
border: none;
border-radius: 9px;
cursor: pointer;
transition: background 0.2s ease, transform 0.1s ease;
}

.btn-find:hover { background: var(‚Äìbg-mid); }
.btn-find:active { transform: translateY(-50%) scale(0.97); }

.divider {
display: flex;
align-items: center;
gap: 14px;
margin: 16px 0;
color: #B8AEB2;
font-size: 0.82rem;
}

.divider::before, .divider::after {
content: ‚Äò‚Äô;
flex: 1;
height: 1px;
background: var(‚Äìcream-soft);
}

.btn-location {
width: 100%;
display: flex;
align-items: center;
justify-content: center;
gap: 8px;
font-family: ‚ÄòFigtree‚Äô, sans-serif;
font-size: 0.92rem;
font-weight: 500;
padding: 14px;
background: transparent;
color: var(‚Äìbg-accent);
border: 1.5px solid var(‚Äìbg-accent);
border-radius: 12px;
cursor: pointer;
transition: all 0.2s ease;
}

.btn-location:hover { background: rgba(107, 63, 160, 0.06); }

.btn-location svg { width: 18px; height: 18px; }

/* Welcome */
.welcome-note {
max-width: 520px;
margin: 14px auto 0;
padding: 0 20px;
}

.welcome-inner {
text-align: center;
padding: 14px 18px;
background: rgba(255,255,255,0.04);
border: 1px solid rgba(255,255,255,0.06);
border-radius: 12px;
font-size: 0.82rem;
color: var(‚Äìtext-muted);
line-height: 1.5;
}

.welcome-inner strong { color: var(‚Äìtext-on-dark); }

/* Results */
.results-wrap {
max-width: 520px;
margin: 0 auto;
padding: 0 20px 40px;
}

.results-header {
font-family: ‚ÄòInstrument Serif‚Äô, Georgia, serif;
font-size: 1.4rem;
color: #fff;
margin-bottom: 12px;
}

.results-count {
font-size: 0.8rem;
color: var(‚Äìtext-muted);
margin-bottom: 14px;
}

.loading { text-align: center; padding: 40px 20px; }
.loading-spinner {
width: 32px; height: 32px;
border: 3px solid rgba(255,255,255,0.1);
border-top-color: var(‚Äìbg-soft);
border-radius: 50%;
animation: spin 0.8s linear infinite;
margin: 0 auto 12px;
}
.loading-text { color: var(‚Äìtext-muted); font-size: 0.9rem; }

.church-card {
background: rgba(255,255,255,0.05);
border: 1px solid rgba(255,255,255,0.08);
border-radius: 14px;
padding: 18px;
margin-bottom: 10px;
transition: background 0.2s, border-color 0.2s;
opacity: 0;
animation: cardReveal 0.5s ease-out forwards;
}

.church-card:hover { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.12); }

.card-top { display: flex; justify-content: space-between; align-items: flex-start; gap: 12px; margin-bottom: 4px; }

.church-name {
font-family: ‚ÄòInstrument Serif‚Äô, Georgia, serif;
font-size: 1.15rem;
color: #fff;
line-height: 1.2;
}

.distance-badge {
flex-shrink: 0;
font-size: 0.73rem;
font-weight: 600;
padding: 4px 10px;
background: var(‚Äìbg-glow);
color: var(‚Äìbg-soft);
border-radius: 100px;
white-space: nowrap;
}

.church-address { font-size: 0.83rem; color: var(‚Äìtext-muted); margin-bottom: 12px; line-height: 1.4; }

.card-actions { display: flex; gap: 8px; flex-wrap: wrap; }

.card-btn {
display: inline-flex; align-items: center; gap: 5px;
font-family: ‚ÄòFigtree‚Äô, sans-serif; font-size: 0.78rem; font-weight: 600;
padding: 8px 13px; border-radius: 8px;
text-decoration: none; transition: all 0.15s; border: none; cursor: pointer;
}

.btn-directions { background: var(‚Äìbg-accent); color: #fff; }
.btn-directions:hover { opacity: 0.85; }
.btn-secondary { background: rgba(255,255,255,0.08); color: var(‚Äìtext-on-dark); border: 1px solid rgba(255,255,255,0.1); }
.btn-secondary:hover { background: rgba(255,255,255,0.12); }

.error-msg {
text-align: center; padding: 16px 18px;
background: rgba(200,80,80,0.12); border: 1px solid rgba(200,80,80,0.2);
border-radius: 12px; color: #E8A0A0; font-size: 0.88rem;
}

.fallback-links { margin-top: 14px; display: flex; flex-direction: column; gap: 8px; }
.fallback-link {
display: flex; align-items: center; justify-content: center; gap: 8px;
padding: 13px; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1);
border-radius: 12px; color: var(‚Äìtext-on-dark); text-decoration: none;
font-size: 0.88rem; font-weight: 500; transition: background 0.2s;
}
.fallback-link:hover { background: rgba(255,255,255,0.1); }

.tip-note {
text-align: center; padding: 14px 18px;
background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.06);
border-radius: 12px; font-size: 0.8rem; color: var(‚Äìtext-muted); line-height: 1.5; margin-top: 14px;
}
.tip-note strong { color: var(‚Äìtext-on-dark); }

footer {
text-align: center; padding: 24px 20px 36px;
font-size: 0.73rem; color: rgba(255,255,255,0.2); line-height: 1.6;
border-top: 1px solid rgba(255,255,255,0.05);
max-width: 520px; margin: 0 auto;
}

.disclaimer {
max-width: 520px; margin: 0 auto; padding: 0 20px 16px;
text-align: center; font-size: 0.7rem; color: rgba(255,255,255,0.18); line-height: 1.6;
}

/* Day counter */
.day-counter {
max-width: 520px; margin: 0 auto; padding: 16px 20px 0;
text-align: center;
opacity: 0;
animation: breatheIn 0.8s ease-out 0.85s forwards;
}

.day-counter-text {
font-size: 0.78rem;
font-weight: 600;
color: var(‚Äìtext-muted);
letter-spacing: 0.04em;
}

.day-counter-bar {
margin-top: 8px;
height: 4px;
background: rgba(255,255,255,0.08);
border-radius: 2px;
overflow: hidden;
}

.day-counter-fill {
height: 100%;
background: var(‚Äìbg-soft);
border-radius: 2px;
transition: width 0.6s ease;
}

@keyframes breatheIn { from { opacity: 0; transform: scale(0.96); } to { opacity: 1; transform: scale(1); } }
@keyframes slideUp { from { opacity: 0; transform: translateY(14px); } to { opacity: 1; transform: translateY(0); } }
@keyframes cardReveal { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
@keyframes spin { to { transform: rotate(360deg); } }

@media (max-width: 480px) {
.search-input { padding-right: 18px; font-size: 1rem; }
.btn-find { position: static; transform: none; width: 100%; margin-top: 10px; padding: 14px; border-radius: 12px; }
.btn-find:active { transform: scale(0.97); }
.input-group { display: flex; flex-direction: column; }
.card-actions { flex-direction: column; }
.card-btn { justify-content: center; }
}
</style>

</head>
<body>

<section class="hero">
  <div class="color-dot" id="colorDot"></div>
  <div class="season-label" id="seasonLabel"></div>
  <h1 class="hero-title" id="heroTitle"></h1>
  <p class="hero-date" id="heroDate"></p>
  <span class="liturgical-color-name" id="colorPill"></span>
</section>

<div class="saint-section" id="saintSection"></div>

<div class="lenten-note" id="lentenNote"></div>

<div class="day-counter" id="dayCounter"></div>

<div class="readings-section" id="readingsSection">
  <div class="readings-card">
    <div class="readings-title">Today's Readings</div>
    <div id="readingsContent" class="readings-loading">Loading readings...</div>
  </div>
</div>

<div class="section-divider">
  <hr>
  <div class="section-divider-label">Find a Church</div>
</div>

<div class="search-wrap">
  <div class="search-card">
    <div class="input-group">
      <input type="text" class="search-input" id="zipInput" placeholder="Enter your zip code" maxlength="5" inputmode="numeric" pattern="[0-9]*" aria-label="Zip code">
      <button class="btn-find" id="searchBtn" onclick="searchByZip()">Find Churches</button>
    </div>
    <div class="divider">or</div>
    <button class="btn-location" id="locationBtn" onclick="searchByLocation()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="10" r="3"/><path d="M12 2a8 8 0 0 0-8 8c0 5.4 7 11.5 7.3 11.8a1 1 0 0 0 1.4 0C13 21.5 20 15.4 20 10a8 8 0 0 0-8-8z"/></svg>
      Use My Location
    </button>
  </div>
</div>

<div class="welcome-note">
  <div class="welcome-inner">
    <strong>Everyone is welcome.</strong><br>
    You don't need to be Catholic or a parish member to attend Mass or receive ashes.
  </div>
</div>

<div class="results-wrap" id="results"></div>

<footer>
  Call ahead or check parish websites to confirm Mass times and schedules.
</footer>

<div class="disclaimer">
  This tool uses publicly available data to locate nearby Catholic churches. Mass times and schedules may vary ‚Äî always confirm directly with the parish. Not affiliated with or endorsed by any diocese, parish, or Catholic organization. Daily readings sourced from USCCB.
</div>

<script>
// =====================================================
// LENTEN CALENDAR DATA: Feb 18 - April 12, 2026
// =====================================================
const CALENDAR = {
  // FEBRUARY
  "2026-02-18": { title: "Ash Wednesday", color: "violet", season: "Lent", note: "Day of fasting and abstinence. Ashes are distributed at Mass and prayer services.", dayOfLent: 1 },
  "2026-02-19": { title: "Thursday After\nAsh Wednesday", color: "violet", season: "Lent", dayOfLent: 2 },
  "2026-02-20": { title: "Friday After\nAsh Wednesday", color: "violet", season: "Lent", note: "Day of abstinence ‚Äî no meat today.", saint: "Friday after Ash Wednesday", dayOfLent: 3 },
  "2026-02-21": { title: "Saturday After\nAsh Wednesday", color: "violet", season: "Lent", saint: "St. Peter Damian, Bishop and Doctor of the Church", dayOfLent: 4 },
  "2026-02-22": { title: "First Sunday\nof Lent", color: "violet", season: "Lent", dayOfLent: 5 },
  "2026-02-23": { title: "Monday, First Week of Lent", color: "violet", season: "Lent", saint: "St. Polycarp, Bishop and Martyr", dayOfLent: 6 },
  "2026-02-24": { title: "Tuesday, First Week of Lent", color: "violet", season: "Lent", dayOfLent: 7 },
  "2026-02-25": { title: "Wednesday, First Week of Lent", color: "violet", season: "Lent", dayOfLent: 8 },
  "2026-02-26": { title: "Thursday, First Week of Lent", color: "violet", season: "Lent", dayOfLent: 9 },
  "2026-02-27": { title: "Friday, First Week of Lent", color: "violet", season: "Lent", note: "Day of abstinence ‚Äî no meat today.", saint: "St. Gregory of Narek, Abbot and Doctor of the Church", dayOfLent: 10 },
  "2026-02-28": { title: "Saturday, First Week of Lent", color: "violet", season: "Lent", dayOfLent: 11 },

  // MARCH
  "2026-03-01": { title: "Second Sunday\nof Lent", color: "violet", season: "Lent", dayOfLent: 12 },
  "2026-03-02": { title: "Monday, Second Week of Lent", color: "violet", season: "Lent", dayOfLent: 13 },
  "2026-03-03": { title: "Tuesday, Second Week of Lent", color: "violet", season: "Lent", saint: "St. Katharine Drexel, Virgin", dayOfLent: 14 },
  "2026-03-04": { title: "Wednesday, Second Week of Lent", color: "violet", season: "Lent", saint: "St. Casimir", dayOfLent: 15 },
  "2026-03-05": { title: "Thursday, Second Week of Lent", color: "violet", season: "Lent", dayOfLent: 16 },
  "2026-03-06": { title: "Friday, Second Week of Lent", color: "violet", season: "Lent", note: "Day of abstinence ‚Äî no meat today.", dayOfLent: 17 },
  "2026-03-07": { title: "Saturday, Second Week of Lent", color: "violet", season: "Lent", saint: "Sts. Perpetua and Felicity, Martyrs", dayOfLent: 18 },
  "2026-03-08": { title: "Third Sunday\nof Lent", color: "violet", season: "Lent", dayOfLent: 19 },
  "2026-03-09": { title: "Monday, Third Week of Lent", color: "violet", season: "Lent", saint: "St. Frances of Rome, Religious", dayOfLent: 20 },
  "2026-03-10": { title: "Tuesday, Third Week of Lent", color: "violet", season: "Lent", dayOfLent: 21 },
  "2026-03-11": { title: "Wednesday, Third Week of Lent", color: "violet", season: "Lent", dayOfLent: 22 },
  "2026-03-12": { title: "Thursday, Third Week of Lent", color: "violet", season: "Lent", dayOfLent: 23 },
  "2026-03-13": { title: "Friday, Third Week of Lent", color: "violet", season: "Lent", note: "Day of abstinence ‚Äî no meat today.", dayOfLent: 24 },
  "2026-03-14": { title: "Saturday, Third Week of Lent", color: "violet", season: "Lent", dayOfLent: 25 },
  "2026-03-15": { title: "Fourth Sunday of Lent\n(Laetare Sunday)", color: "rose", season: "Lent", note: "Laetare Sunday ‚Äî \"Rejoice!\" Rose vestments may be worn today.", dayOfLent: 26 },
  "2026-03-16": { title: "Monday, Fourth Week of Lent", color: "violet", season: "Lent", dayOfLent: 27 },
  "2026-03-17": { title: "Tuesday, Fourth Week of Lent", color: "violet", season: "Lent", saint: "St. Patrick, Bishop", dayOfLent: 28 },
  "2026-03-18": { title: "Wednesday, Fourth Week of Lent", color: "violet", season: "Lent", saint: "St. Cyril of Jerusalem, Bishop and Doctor of the Church", dayOfLent: 29 },
  "2026-03-19": { title: "Solemnity of\nSt. Joseph", color: "white", season: "Lent", saint: "St. Joseph, Spouse of the Blessed Virgin Mary", note: "Solemnity ‚Äî white vestments today.", dayOfLent: 30 },
  "2026-03-20": { title: "Friday, Fourth Week of Lent", color: "violet", season: "Lent", note: "Day of abstinence ‚Äî no meat today.", dayOfLent: 31 },
  "2026-03-21": { title: "Saturday, Fourth Week of Lent", color: "violet", season: "Lent", dayOfLent: 32 },
  "2026-03-22": { title: "Fifth Sunday\nof Lent", color: "violet", season: "Lent", dayOfLent: 33 },
  "2026-03-23": { title: "Monday, Fifth Week of Lent", color: "violet", season: "Lent", saint: "St. Turibius of Mogrovejo, Bishop", dayOfLent: 34 },
  "2026-03-24": { title: "Tuesday, Fifth Week of Lent", color: "violet", season: "Lent", dayOfLent: 35 },
  "2026-03-25": { title: "The Annunciation\nof the Lord", color: "white", season: "Lent", note: "Solemnity ‚Äî white vestments today.", dayOfLent: 36 },
  "2026-03-26": { title: "Thursday, Fifth Week of Lent", color: "violet", season: "Lent", dayOfLent: 37 },
  "2026-03-27": { title: "Friday, Fifth Week of Lent", color: "violet", season: "Lent", note: "Day of abstinence ‚Äî no meat today.", dayOfLent: 38 },
  "2026-03-28": { title: "Saturday, Fifth Week of Lent", color: "violet", season: "Lent", dayOfLent: 39 },
  "2026-03-29": { title: "Palm Sunday of the\nPassion of the Lord", color: "red", season: "Holy Week", note: "Holy Week begins. Palms are blessed and distributed.", dayOfLent: 40 },
  "2026-03-30": { title: "Monday of\nHoly Week", color: "violet", season: "Holy Week", dayOfLent: 41 },
  "2026-03-31": { title: "Tuesday of\nHoly Week", color: "violet", season: "Holy Week", dayOfLent: 42 },

  // APRIL
  "2026-04-01": { title: "Wednesday of\nHoly Week", color: "violet", season: "Holy Week", dayOfLent: 43 },
  "2026-04-02": { title: "Holy Thursday", color: "white", season: "The Triduum", note: "Mass of the Lord's Supper. The Triduum begins.", dayOfLent: 44 },
  "2026-04-03": { title: "Good Friday", color: "red", season: "The Triduum", note: "Day of fasting and abstinence. No Mass is celebrated today ‚Äî Celebration of the Lord's Passion.", dayOfLent: 45 },
  "2026-04-04": { title: "Holy Saturday", color: "white", season: "The Triduum", note: "The Easter Vigil is celebrated after nightfall ‚Äî the most important liturgy of the year.", dayOfLent: 46 },
  "2026-04-05": { title: "Easter Sunday\nof the Resurrection\nof the Lord", color: "white", season: "Easter", note: "He is risen! Alleluia! üïäÔ∏è", dayOfLent: null },
  "2026-04-06": { title: "Monday Within\nthe Octave of Easter", color: "white", season: "Easter", dayOfLent: null },
  "2026-04-07": { title: "Tuesday Within\nthe Octave of Easter", color: "white", season: "Easter", dayOfLent: null },
  "2026-04-08": { title: "Wednesday Within\nthe Octave of Easter", color: "white", season: "Easter", dayOfLent: null },
  "2026-04-09": { title: "Thursday Within\nthe Octave of Easter", color: "white", season: "Easter", dayOfLent: null },
  "2026-04-10": { title: "Friday Within\nthe Octave of Easter", color: "white", season: "Easter", dayOfLent: null },
  "2026-04-11": { title: "Saturday Within\nthe Octave of Easter", color: "white", season: "Easter", dayOfLent: null },
  "2026-04-12": { title: "Second Sunday of Easter\n(Sunday of Divine Mercy)", color: "white", season: "Easter", dayOfLent: null },
};

// =====================================================
// INITIALIZE
// =====================================================
function init() {
  const today = new Date();
  const key = today.toISOString().split('T')[0];
  const dayData = CALENDAR[key];

  const months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
  const days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
  const dateStr = `${days[today.getDay()]}, ${months[today.getMonth()]} ${today.getDate()}, ${today.getFullYear()}`;

  if (!dayData) {
    // Outside Lent/Easter range
    document.getElementById('heroTitle').innerHTML = 'Find a Catholic<br>Church Near You';
    document.getElementById('heroDate').textContent = dateStr;
    document.getElementById('seasonLabel').textContent = '';
    document.getElementById('colorPill').style.display = 'none';
    document.getElementById('colorDot').style.display = 'none';
    document.getElementById('dayCounter').style.display = 'none';
    document.getElementById('readingsSection').style.display = 'none';
    document.getElementById('saintSection').style.display = 'none';
    document.getElementById('lentenNote').style.display = 'none';
    return;
  }

  // Set color theme
  document.body.className = dayData.color;

  // Color dot
  const dot = document.getElementById('colorDot');
  dot.className = `color-dot ${dayData.color}`;

  // Season label
  document.getElementById('seasonLabel').textContent = dayData.season;

  // Title (handle \n for line breaks)
  document.getElementById('heroTitle').innerHTML = dayData.title.replace(/\n/g, '<br>');

  // Date
  document.getElementById('heroDate').textContent = dateStr;

  // Color pill
  const colorNames = { violet: 'Violet', rose: 'Rose', red: 'Red', white: 'White & Gold' };
  const colorHexes = { violet: '#8B6AAF', rose: '#D4909A', red: '#C05050', white: '#D4B86A' };
  document.getElementById('colorPill').innerHTML = `<span class="mini-dot" style="background:${colorHexes[dayData.color]}"></span> Liturgical Color: ${colorNames[dayData.color]}`;

  // Saint
  const saintEl = document.getElementById('saintSection');
  if (dayData.saint) {
    saintEl.innerHTML = `<div class="saint-name">${dayData.saint}</div>`;
  } else {
    saintEl.style.display = 'none';
  }

  // Lenten note
  const noteEl = document.getElementById('lentenNote');
  if (dayData.note) {
    noteEl.innerHTML = `<div class="lenten-note-inner"><strong>${dayData.note}</strong></div>`;
  } else {
    noteEl.style.display = 'none';
  }

  // Day counter
  const counterEl = document.getElementById('dayCounter');
  if (dayData.dayOfLent) {
    const totalDays = 46; // Ash Wednesday to Holy Saturday
    const pct = Math.round((dayData.dayOfLent / totalDays) * 100);
    counterEl.innerHTML = `
      <div class="day-counter-text">Day ${dayData.dayOfLent} of Lent</div>
      <div class="day-counter-bar"><div class="day-counter-fill" style="width:${pct}%"></div></div>
    `;
  } else {
    counterEl.style.display = 'none';
  }

  // Load readings
  loadReadings(today);
}

// =====================================================
// READINGS API
// =====================================================
async function loadReadings(date) {
  const mm = String(date.getMonth() + 1).padStart(2, '0');
  const dd = String(date.getDate()).padStart(2, '0');
  const year = date.getFullYear();
  const contentEl = document.getElementById('readingsContent');

  try {
    const res = await fetch(`https://cpbjr.github.io/catholic-readings-api/readings/${year}/${mm}-${dd}.json`);
    if (!res.ok) throw new Error('No readings data');
    const data = await res.json();

    let html = '';
    if (data.first_reading) {
      html += `<div class="reading-item"><div class="reading-label">First Reading</div><div class="reading-ref">${data.first_reading}</div></div>`;
    }
    if (data.psalm) {
      html += `<div class="reading-item"><div class="reading-label">Responsorial Psalm</div><div class="reading-ref">${data.psalm}</div></div>`;
    }
    if (data.second_reading) {
      html += `<div class="reading-item"><div class="reading-label">Second Reading</div><div class="reading-ref">${data.second_reading}</div></div>`;
    }
    if (data.gospel) {
      html += `<div class="reading-item"><div class="reading-label">Gospel</div><div class="reading-ref">${data.gospel}</div></div>`;
    }

    html += `<a class="readings-link" href="https://bible.usccb.org/bible/readings/${mm}${dd}${String(year).slice(2)}.cfm" target="_blank" rel="noopener">Read Full Readings at USCCB ‚Üí</a>`;
    contentEl.innerHTML = html;
  } catch (err) {
    // Fallback: just link to USCCB
    contentEl.innerHTML = `
      <div style="text-align:center;color:var(--text-muted);padding:8px 0;font-size:0.88rem;">
        <a class="readings-link" href="https://bible.usccb.org/bible/readings/${mm}${dd}${String(year).slice(2)}.cfm" target="_blank" rel="noopener">View Today's Readings at USCCB ‚Üí</a>
      </div>
    `;
  }
}

// =====================================================
// CHURCH FINDER (same as before)
// =====================================================
document.getElementById('zipInput').addEventListener('keydown', e => {
  if (e.key === 'Enter') searchByZip();
});

async function searchByZip() {
  const zip = document.getElementById('zipInput').value.trim();
  if (!/^\d{5}$/.test(zip)) { showError('Please enter a valid 5-digit zip code.'); return; }
  showLoading();
  try {
    const geoRes = await fetch(`https://nominatim.openstreetmap.org/search?postalcode=${zip}&country=US&format=json&limit=1`, { headers: { 'User-Agent': 'LentenCompanion/1.0' } });
    const geoData = await geoRes.json();
    if (!geoData?.length) { showError("Couldn't find that zip code."); return; }
    await findChurches(parseFloat(geoData[0].lat), parseFloat(geoData[0].lon));
  } catch (err) { showError('Something went wrong. Please try again.'); }
}

async function searchByLocation() {
  if (!navigator.geolocation) { showError('Geolocation not supported.'); return; }
  const btn = document.getElementById('locationBtn');
  btn.disabled = true;
  btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px"><circle cx="12" cy="10" r="3"/><path d="M12 2a8 8 0 0 0-8 8c0 5.4 7 11.5 7.3 11.8a1 1 0 0 0 1.4 0C13 21.5 20 15.4 20 10a8 8 0 0 0-8-8z"/></svg> Getting location...';
  showLoading();
  navigator.geolocation.getCurrentPosition(
    async pos => { resetLocBtn(btn); await findChurches(pos.coords.latitude, pos.coords.longitude); },
    err => { resetLocBtn(btn); showError("Couldn't get location. Enter a zip code instead."); },
    { enableHighAccuracy: true, timeout: 15000, maximumAge: 300000 }
  );
}

function resetLocBtn(btn) {
  btn.disabled = false;
  btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px"><circle cx="12" cy="10" r="3"/><path d="M12 2a8 8 0 0 0-8 8c0 5.4 7 11.5 7.3 11.8a1 1 0 0 0 1.4 0C13 21.5 20 15.4 20 10a8 8 0 0 0-8-8z"/></svg> Use My Location';
}

async function findChurches(lat, lon) {
  try {
    const radius = 16000;
    const query = `[out:json][timeout:20];(nwr["amenity"="place_of_worship"]["denomination"="catholic"](around:${radius},${lat},${lon});nwr["amenity"="place_of_worship"]["religion"="christian"]["denomination"="roman_catholic"](around:${radius},${lat},${lon}););out center body;`;
    let data;
    try {
      const ctrl = new AbortController();
      const tid = setTimeout(() => ctrl.abort(), 15000);
      const res = await fetch('https://overpass-api.de/api/interpreter', {
        method: 'POST', headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: `data=${encodeURIComponent(query)}`, signal: ctrl.signal
      });
      clearTimeout(tid);
      data = await res.json();
    } catch (e) { showFallback(lat, lon); return; }
    if (!data.elements?.length) { showFallback(lat, lon); return; }
    const churches = data.elements.map(el => {
      const eLat = el.lat || el.center?.lat, eLon = el.lon || el.center?.lon;
      if (!eLat || !eLon) return null;
      const t = el.tags || {};
      return { name: t.name || t['name:en'] || 'Catholic Church', phone: t.phone || t['contact:phone'] || null, website: t.website || t['contact:website'] || null, address: buildAddr(t), lat: eLat, lon: eLon, distance: haversine(lat, lon, eLat, eLon) };
    }).filter(Boolean).sort((a, b) => a.distance - b.distance).slice(0, 15);
    renderResults(churches);
  } catch (err) { showFallback(lat, lon); }
}

function renderResults(churches) {
  const el = document.getElementById('results');
  if (!churches.length) { el.innerHTML = ''; return; }
  let html = `<div class="results-header">Churches Near You</div><div class="results-count">${churches.length} Catholic churches within 10 miles</div>`;
  churches.forEach((c, i) => {
    const mi = c.distance.toFixed(1);
    const mapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${c.lat},${c.lon}`;
    const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(c.name + ' Mass times ' + c.address)}`;
    html += `<div class="church-card" style="animation-delay:${i*0.06}s"><div class="card-top"><div class="church-name">${esc(c.name)}</div><span class="distance-badge">${mi} mi</span></div>${c.address ? `<div class="church-address">${esc(c.address)}</div>` : ''}<div class="card-actions"><a class="card-btn btn-directions" href="${mapsUrl}" target="_blank">üó∫Ô∏è Directions</a>${c.phone ? `<a class="card-btn btn-secondary" href="tel:${c.phone}">üìû Call</a>` : ''}${c.website ? `<a class="card-btn btn-secondary" href="${c.website}" target="_blank" rel="noopener">üåê Website</a>` : ''}<a class="card-btn btn-secondary" href="${searchUrl}" target="_blank" rel="noopener">üîç Mass Times</a></div></div>`;
  });
  html += `<div class="tip-note"><strong>üí° Call ahead to confirm schedules.</strong><br>Parishes may have special Lenten services beyond regular Mass times.</div>`;
  el.innerHTML = html;
  el.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function showFallback(lat, lon) {
  document.getElementById('results').innerHTML = `<div class="results-header">Search Complete</div><div style="text-align:center;padding:30px 20px;color:var(--text-muted)"><p>We couldn't find churches in our database for this area. Try:</p><div class="fallback-links"><a class="fallback-link" href="https://www.google.com/maps/search/catholic+church/@${lat},${lon},13z" target="_blank">üó∫Ô∏è Search Google Maps</a><a class="fallback-link" href="https://masstimes.org/" target="_blank">‚õ™ MassTimes.org</a></div></div>`;
}

function showLoading() { document.getElementById('results').innerHTML = `<div class="loading"><div class="loading-spinner"></div><div class="loading-text">Finding churches near you...</div></div>`; }
function showError(msg) { document.getElementById('results').innerHTML = `<div class="error-msg">${msg}</div>`; }
function haversine(lat1,lon1,lat2,lon2) { const R=3959,dLat=(lat2-lat1)*Math.PI/180,dLon=(lon2-lon1)*Math.PI/180; const a=Math.sin(dLat/2)**2+Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)**2; return R*2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)); }
function buildAddr(t) { const p=[]; if(t['addr:housenumber']&&t['addr:street'])p.push(`${t['addr:housenumber']} ${t['addr:street']}`);else if(t['addr:street'])p.push(t['addr:street']); const cs=[t['addr:city'],t['addr:state']].filter(Boolean).join(', '); if(cs)p.push(cs); if(t['addr:postcode'])p.push(t['addr:postcode']); return p.join(', '); }
function esc(s) { const d=document.createElement('div'); d.textContent=s; return d.innerHTML; }

// Go!
init();
</script>

</body>
</html>
